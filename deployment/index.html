<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网站部署 | 搭建博客 by 豆姆</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="豆姆智能科技">
    
    <link rel="preload" href="/assets/css/0.styles.506ce43b.css" as="style"><link rel="preload" href="/assets/js/app.a10b2338.js" as="script"><link rel="preload" href="/assets/js/2.c67e4eb4.js" as="script"><link rel="preload" href="/assets/js/19.515fff59.js" as="script"><link rel="preload" href="/assets/js/5.a0895fed.js" as="script"><link rel="preload" href="/assets/js/4.07c81549.js" as="script"><link rel="prefetch" href="/assets/js/10.caa6e3f1.js"><link rel="prefetch" href="/assets/js/11.f842dd4d.js"><link rel="prefetch" href="/assets/js/12.d9614a8a.js"><link rel="prefetch" href="/assets/js/13.67cb9c4a.js"><link rel="prefetch" href="/assets/js/14.2e756fb6.js"><link rel="prefetch" href="/assets/js/15.ed4759a9.js"><link rel="prefetch" href="/assets/js/16.57921eec.js"><link rel="prefetch" href="/assets/js/17.40b961b0.js"><link rel="prefetch" href="/assets/js/18.36690089.js"><link rel="prefetch" href="/assets/js/20.17610eb0.js"><link rel="prefetch" href="/assets/js/21.d979dce3.js"><link rel="prefetch" href="/assets/js/22.0f0f9d49.js"><link rel="prefetch" href="/assets/js/23.547d4385.js"><link rel="prefetch" href="/assets/js/24.c6903fa3.js"><link rel="prefetch" href="/assets/js/3.bb0203b8.js"><link rel="prefetch" href="/assets/js/6.29bb59fa.js"><link rel="prefetch" href="/assets/js/7.f4931d24.js"><link rel="prefetch" href="/assets/js/8.17ee8d85.js"><link rel="prefetch" href="/assets/js/9.a08a7c02.js">
    <link rel="stylesheet" href="/assets/css/0.styles.506ce43b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">搭建博客 by 豆姆</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  教程介绍
</a></div><div class="nav-item"><a href="/environment/" class="nav-link">
  环境配置
</a></div><div class="nav-item"><a href="/course/" class="nav-link">
  基础教程
</a></div><div class="nav-item"><a href="/deployment/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  网站部署
</a></div><div class="nav-item"><a href="/component/" class="nav-link">
  vue组件
</a></div><div class="nav-item"><a href="https://github.com/C01day/vuepress-teach" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  教程介绍
</a></div><div class="nav-item"><a href="/environment/" class="nav-link">
  环境配置
</a></div><div class="nav-item"><a href="/course/" class="nav-link">
  基础教程
</a></div><div class="nav-item"><a href="/deployment/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  网站部署
</a></div><div class="nav-item"><a href="/component/" class="nav-link">
  vue组件
</a></div><div class="nav-item"><a href="https://github.com/C01day/vuepress-teach" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>网站部署</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/deployment/#使用github" class="sidebar-link">使用Github</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/deployment/#创建账号和仓库" class="sidebar-link">创建账号和仓库</a></li><li class="sidebar-sub-header"><a href="/deployment/#安装git" class="sidebar-link">安装Git</a></li><li class="sidebar-sub-header"><a href="/deployment/#安装-github-desktop" class="sidebar-link">安装 Github Desktop</a></li><li class="sidebar-sub-header"><a href="/deployment/#相关名词解释" class="sidebar-link">相关名词解释</a></li><li class="sidebar-sub-header"><a href="/deployment/#提交更新" class="sidebar-link">提交更新</a></li></ul></li><li><a href="/deployment/#github-pages-部署" class="sidebar-link">Github pages 部署</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/deployment/#vercel-部署" class="sidebar-link">Vercel 部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/deployment/#更改-dest" class="sidebar-link">更改 dest</a></li><li class="sidebar-sub-header"><a href="/deployment/#导入项目" class="sidebar-link">导入项目</a></li><li class="sidebar-sub-header"><a href="/deployment/#更改production-branch" class="sidebar-link">更改Production Branch</a></li></ul></li><li><a href="/deployment/#自定义域名" class="sidebar-link">自定义域名</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/deployment/#github-pages-自定义域名" class="sidebar-link">Github pages 自定义域名</a></li><li class="sidebar-sub-header"><a href="/deployment/#vercel-自定义域名" class="sidebar-link">Vercel 自定义域名</a></li></ul></li><li><a href="/deployment/#如何让百度和google搜索到" class="sidebar-link">如何让百度和Google搜索到？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/deployment/#生成站点地图-sitemap" class="sidebar-link">生成站点地图 sitemap</a></li><li class="sidebar-sub-header"><a href="/deployment/#百度站长" class="sidebar-link">百度站长</a></li><li class="sidebar-sub-header"><a href="/deployment/#google-search-console" class="sidebar-link">Google Search Console</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="网站部署"><a href="#网站部署" class="header-anchor">#</a> 网站部署<span class="badge error" style="vertical-align:top;" data-v-15b7b770>编写中</span></h1> <p>有了初步的网站，就可以部署了。</p> <p>部署之后别人可以直接通过网址访问，或者在搜索引擎中搜索关键字访问。</p> <p>虽然部署是一件麻烦事，但由于只是静态网页，因此选择部署在 Github pages 或 vercel 上，能省下不少步骤。</p> <div class="custom-block tip"><p class="custom-block-title">目录</p> <p>部署的章节分为以下内容：</p> <ul><li>学会使用Github
<ul><li>创建账号和仓库</li> <li>安装Git</li> <li>安装Github Desktop</li></ul></li> <li>Github pages 部署</li> <li>Vercel 部署</li> <li>自定义域名
<ul><li>Github pages自定义域名</li> <li>Vercel自定义域名</li></ul></li> <li>如何让百度和Google搜索到？
<ul><li>生成站点地图 sitemap</li> <li>百度站长</li> <li>Google Search Console</li></ul></li></ul></div> <div class="custom-block warning"><p class="custom-block-title">提示</p> <p>由于步骤有些多，可能更新不及时。</p> <p>同时，部署只是锦上添花，并不是必要的事情。如果想部署，而我又没来得及更新的话，可以按照目录顺序搜索相应的关键字，网上都有相关的资料。</p></div> <h2 id="使用github"><a href="#使用github" class="header-anchor">#</a> 使用Github</h2> <h3 id="创建账号和仓库"><a href="#创建账号和仓库" class="header-anchor">#</a> 创建账号和仓库</h3> <p>部署要用到 Github pages 和 Vercel ，我们将代码文件放在 Github 上。因此需要创建一个账号，并新建一个项目仓库(repositories)用来存储项目文件，名字建议为<code>&lt;USERNAME&gt;.github.io</code>，<code>&lt;USERNAME&gt;</code>为你的 Github 用户名，这样能免去设置<code>Base</code>的麻烦。</p> <h3 id="安装git"><a href="#安装git" class="header-anchor">#</a> 安装Git</h3> <p>要将文件上传到 Github ，需要用到 Git 工具，它是一个版本控制系统，能很好地管理代码。
可以在<a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">Git官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下载它，下载完后具体的细节可以查看网上的教程。</p> <h3 id="安装-github-desktop"><a href="#安装-github-desktop" class="header-anchor">#</a> 安装 Github Desktop</h3> <p>GitHub Desktop 是一个可以与 GitHub 交互的应用程序，可以在<a href="https://desktop.github.com/" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中下载。</p> <p>具体的使用方法可以参考<a href="https://docs.github.com/cn/desktop" target="_blank" rel="noopener noreferrer">GitHub Desktop 文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。如果Github上有仓库，就克隆远程仓库到本地。如果没有的话也可以在 Github Desktop 中直接创建。具体的方法文档中都有详细的介绍。
</p><div align="center"><img src="https://i.loli.net/2021/08/08/t6eQ1Nx5bidBvcy.png" alt="windows-file-menu.png"></div><p></p> <p>顺带一提，第一次使用需要配置SSH密钥，来获得读取远程仓库的权限，相应方法可以参考官网提供的<a href="https://docs.github.com/cn/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noopener noreferrer">生成SSH密钥教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。
</p><div align="center"><img src="https://i.loli.net/2021/08/08/HdM3ESgFB8G6Cvu.png" alt=""></div><p></p> <h3 id="相关名词解释"><a href="#相关名词解释" class="header-anchor">#</a> 相关名词解释</h3> <ul><li><p>Repository（版本库，仓库）：顾名思义，就是仓库</p></li> <li><p>Branch（分支）：主分支master，可以建立数个分支issue，进行功能添加或者bug修复，之后合并（merge）到master分支。</p></li> <li><p>Push（推送）：推送本地修改到远程服务器上对应的仓库。</p></li> <li><p>Pull（拉取）：拉取远程服务器上面对应仓库的修改到本地。</p></li> <li><p>Merge（合并）：分支合并，要留心分支合并的冲突。</p></li> <li><p>Revert（回退）：适合用于逐个版本回退，不能跨修改记录回退，也就是只能一步一步的往后回退。</p></li></ul> <h3 id="提交更新"><a href="#提交更新" class="header-anchor">#</a> 提交更新</h3> <p>要提交代码的更新到远程仓库，首先需要点击左下角的 commit 按钮
</p><div align="center"><img src="https://i.loli.net/2021/08/07/hDSAyJBC6Hb7tIL.png" alt="click-commit-to-master.png"></div><p></p> <p>然后点击上面的 push ，即可提交更新。由于 Github 访问速度过慢，可能会超时报错，多试几次即可，或者用 VPN 加速。
</p><div align="center"><img src="https://i.loli.net/2021/08/07/UbQZaCvpOMJoAnI.png" alt="push-to-origin.png"></div><p></p> <h2 id="github-pages-部署"><a href="#github-pages-部署" class="header-anchor">#</a> Github pages 部署</h2> <p>在部署之前，我们需要创建一个 gh-pages 分支，之后将打包以后的静态文件放在 gh-pages 分支中。
</p><div align="center"><img src="https://i.loli.net/2021/08/08/pRsED7tQ8WkSVqu.png" alt="new-branch-button-mac.png"></div><p></p> <p>然后在项目文件夹下新建文件<code>deploy.sh</code>作为打包命令的脚本，代码如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/usr/bin/env sh</span>

<span class="token comment"># 确保脚本抛出遇到的错误</span>
<span class="token builtin class-name">set</span> -e

<span class="token comment"># 生成静态文件</span>
<span class="token function">npm</span> run build

<span class="token comment"># 进入生成的文件夹</span>
<span class="token builtin class-name">cd</span> docs/.vuepress/dist

<span class="token comment"># 如果是发布到自定义域名</span>
<span class="token comment"># echo 'c01day.top' &gt; CNAME</span>

<span class="token function">git</span> init
<span class="token function">git</span> <span class="token function">add</span> -A
<span class="token function">git</span> commit -m <span class="token string">'deploy'</span>

<span class="token comment"># 如果发布到 https://&lt;USERNAME&gt;.github.io</span>
<span class="token function">git</span> push -f git@github.com:<span class="token operator">&lt;</span>USERNAME<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>USERNAME<span class="token operator">&gt;</span>.github.io.git master:gh-pages

<span class="token comment"># 如果发布到 https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;</span>
<span class="token comment"># git push -f git@github.com:&lt;USERNAME&gt;/&lt;REPO&gt;.git master:gh-pages</span>
            
<span class="token builtin class-name">cd</span> -
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><br><br></p> <div class="custom-block tip"><p class="custom-block-title">解释</p> <ul><li><code>npm run build</code>打包命令生成的静态文件在<code>docs/.vuepress/dist</code>中，之后将其上传到<code>gh-pages</code>分支上。可以在<code>config.js</code>中用dest指定打包路径。</li> <li>将<code>git push</code>命令中的<code>&lt;USERNAME&gt;</code>替换为自己 Github 账号的用户名。</li> <li>在VSCode菜单栏点击打开终端，或者用快捷键<code>Ctrl+`</code>（在键盘左上角），在命令行中用<code>sh</code>命令运行文件。</li> <li></li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sh</span> deploy.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <p><code>gh-pages</code>代码上传完之后，点击项目的<code>Settings-&gt;Pages</code>，选择<code>gh-pages</code>作为资源
</p><div align="center"><img src="https://i.loli.net/2021/08/08/A7bRWK5vEqwf4H6.png" alt=""></div><p></p> <p>然后就会出现网址
</p><div align="center"><img src="https://i.loli.net/2021/08/08/NMFbwlsng3TjC8p.png" alt=""></div><p></p> <p>当然，上面的命令是将静态文件提交到<code>gh-pages</code>分支上，也别忘了将代码更新提交到主分支上。</p> <h2 id="vercel-部署"><a href="#vercel-部署" class="header-anchor">#</a> Vercel 部署</h2> <p>由于在 Github pages 上部署的网页不能被百度蜘蛛爬取到，因此我们迁移到 Vercel 。当然，要是不怎么在乎百度是否收录，可以跳过此节。</p> <h3 id="更改-dest"><a href="#更改-dest" class="header-anchor">#</a> 更改 dest</h3> <p>之前打包的路径为<code>docs/.vuepress/dist</code>，由于 Vercel 上部署项目的<code>Preview Branches</code>会在分支中打包并寻找<code>public</code>文件，因此需要在<code>config.js</code>中设置 dest ，将打包文件路径改为<code>public</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  dest<span class="token operator">:</span> <span class="token string">'public'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>并将之前<code>deploy.sh</code>中的<code>cd docs/.vuepress/dist</code>改为</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># deploy.sh</span>
<span class="token comment"># 原来是 cd docs/.vuepress/dist</span>
<span class="token builtin class-name">cd</span> public
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>然后将之前<code>docs/.vuepress/dist</code>路径下的文件删除，并尝试<code>build</code>一次。</p> <h3 id="导入项目"><a href="#导入项目" class="header-anchor">#</a> 导入项目</h3> <p>首先在<a href="https://vercel.com/" target="_blank" rel="noopener noreferrer">vercel官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>注册账号。之后创建一个项目，导入 Github 上的仓库，步骤默认即可。</p> <p>不论有没有部署成功，先跳到下一步把<code>Production Branch</code>改了。</p> <h3 id="更改production-branch"><a href="#更改production-branch" class="header-anchor">#</a> 更改<code>Production Branch</code></h3> <p>我们需要将<code>Production Branch</code>更改为<code>gh-pages</code>分支，让<code>main</code>分支作为<code>Preview Branches</code>。</p> <p>其实就和之前 Github pages 的部署一样，将<code>gh-pages</code>分支的静态文件作为网页源代码。</p> <p>步骤很简单，到项目的<code>Settings-&gt;Git</code>，找到<code>Production Branch</code>，把分支从<code>main</code>改为<code>gh-pages</code>就行。
</p><div align="center"><img src="https://i.loli.net/2021/08/08/ykie23LXMzKZqvu.png" alt=""></div><p></p> <p>之后任意提交一次更新到<code>gh-pages</code>分支上，Vercel 就会自动部署了，可以点击查看部署的网站。
</p><div align="center"><img src="https://i.loli.net/2021/08/08/Xx62VvJ7UqBfzFg.png" alt=""></div><p></p> <h2 id="自定义域名"><a href="#自定义域名" class="header-anchor">#</a> 自定义域名</h2> <p>要自定义域名，首先需要买一个域名，服务商随意，我用的是阿里云。之后实名认证等步骤不再赘述。</p> <h3 id="github-pages-自定义域名"><a href="#github-pages-自定义域名" class="header-anchor">#</a> Github pages 自定义域名</h3> <h4 id="配置域名解析"><a href="#配置域名解析" class="header-anchor">#</a> 配置域名解析</h4> <p>转到域名服务商后台的域名解析，添加如下两条记录：
</p><div align="center"><img src="https://i.loli.net/2021/08/08/IKlnEGsAwpxHVQ3.png" alt=""></div><p></p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>记录值为<code>&lt;USERNAME&gt;.github.io</code>，<code>&lt;USERNAME&gt;</code>为你的 Github 用户名。</li> <li>记录类型选择 CNAME 。</li> <li>主机记录分别为<code>www</code>和<code>@</code>，<code>@</code>也就是不填主机记录的默认值。</li> <li>如果项目在其他仓库，记录值同样为<code>&lt;USERNAME&gt;.github.io</code>。</li></ul></div> <h4 id="配置-cname"><a href="#配置-cname" class="header-anchor">#</a> 配置 CNAME</h4> <p>首先在<code>&lt;USERNAME&gt;.github.io</code>仓库首页新建一个文件<code>CNAME</code>（如果项目在其他仓库，也是在<code>&lt;USERNAME&gt;.github.io</code>仓库中配置域名），内容为你的域名，例如</p> <div class="language-CNAME line-numbers-mode"><pre class="language-text"><code>c01day.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>并将<code>deploy.sh</code>文件中的以下内容去掉注释，同样换为自己的域名</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 如果是发布到自定义域名</span>
<span class="token comment"># echo 'c01day.com' &gt; CNAME</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>之后在仓库中的<code>Settings-&gt;Pages</code>下，可以看到<code>Custom domain</code>会变为自己的域名。
</p><div align="center"><img src="https://i.loli.net/2021/08/08/rBHfhzLJVqZKl2C.png" alt=""></div><p></p> <p>在上面会出现网址，为<code>https://www.XXX.com/</code>，例如<code>https://www.c01day.com/</code>。</p> <h4 id="如果是自定义仓库应该怎么做"><a href="#如果是自定义仓库应该怎么做" class="header-anchor">#</a> 如果是自定义仓库应该怎么做</h4> <p><strong><font color="red">以上所提到的仓库默认为<code>&lt;USERNAME&gt;.github.io</code>，如果项目在其他自定义仓库中，请看下面提示（以仓库名<code>blog</code>为例）</font></strong></p> <div class="custom-block tip"><p class="custom-block-title">如果项目在自定义仓库</p> <ul><li>域名解析配置不变，和上面一样。</li> <li>CNAME 文件依然放到<code>&lt;USERNAME&gt;.github.io</code>中，也就是说，最好有一个<code>&lt;USERNAME&gt;.github.io</code>仓库。</li> <li><code>deploy.sh</code>文件中的<code>echo 'XXX.com' &gt; CNAME</code>就不用了。</li> <li>在代码的<code>config.js</code>中，添加<code>base: &quot;/&lt;REPO&gt;/&quot;,</code>，<code>&lt;REPO&gt;</code>为自定义仓库名，例如<code>blog</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  base<span class="token operator">:</span> <span class="token string">&quot;/&lt;REPO&gt;/&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 例如 base: &quot;/blog/&quot;,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>在<code>.md</code>文件中，图片的引用路径要加上<code>$withBase</code>，注意<code>src</code>是<code>v-bind</code>语法，前面有个<code>:</code>。</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$withBase(<span class="token punctuation">'</span>/XXX.png<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <p>之后，到自定义仓库的<code>Settings-&gt;Pages</code>中可以看到，部署的网址为<code>https://www.XXX.com/&lt;REPO&gt;/</code>，例如<code>https://www.c01day.com/blog/</code>。</p> <h3 id="vercel-自定义域名"><a href="#vercel-自定义域名" class="header-anchor">#</a> Vercel 自定义域名</h3> <div class="custom-block danger"><p class="custom-block-title">注意</p> <p>同一个域名不能同时用在 Github pages 和 Vercel 上。</p></div> <p>在 Vercel 刚刚部署项目的<code>Settings-&gt;Domains</code>中，添加自己的域名
</p><div align="center"><img src="https://i.loli.net/2021/08/08/kFftuxGcmKzw3XN.png" alt=""></div><p></p> <p>按照给的提示，添加两条解析
</p><div align="center"><img src="https://i.loli.net/2021/08/08/W6KMcksqv7FhdD8.png" alt=""></div><p></p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>注意要将之前 Github pages 中设置的域名解析删除，因为是互斥的。</li> <li>并不清楚其他人的IP是不是也为76.76.21.21，据说有些IP被墙了。</li></ul></div> <p>然后就配置完成了，并且签发了证书
</p><div align="center"><img src="https://i.loli.net/2021/08/08/yrW29GHwPmscolQ.png" alt=""></div><p></p> <h2 id="如何让百度和google搜索到"><a href="#如何让百度和google搜索到" class="header-anchor">#</a> 如何让百度和Google搜索到？</h2> <h3 id="生成站点地图-sitemap"><a href="#生成站点地图-sitemap" class="header-anchor">#</a> 生成站点地图 sitemap</h3> <p>站点地图<code>sitemap.xml</code>是为了让蜘蛛更好地爬取到我们的网页。我们需要安装生成站点地图的插件</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> vuepress-plugin-sitemap
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后在plugins中导入</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'sitemap'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      hostname<span class="token operator">:</span> <span class="token string">'https://www.c01day.com/'</span> <span class="token comment">//为你的自定义域名</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>之后每次<code>build</code>后都会在静态资源文件夹中生成<code>sitemap.xml</code>文件，用来上传到百度站长和 Google Search Console 。</p> <h3 id="百度站长"><a href="#百度站长" class="header-anchor">#</a> 百度站长</h3> <p>登录百度站长，添加自己的网址，会有三种方式验证你对网站的所属权，下面都有具体的操作步骤
</p><div align="center"><img src="https://i.loli.net/2021/08/08/OCLGjJ4vd27A6yl.png" alt=""></div><p></p> <p>验证完后提交自己的<code>sitemap.xml</code>，例如
</p><div align="center"><img src="https://i.loli.net/2021/08/08/1HFt37JVdyRQCsc.png" alt=""></div><p></p> <h3 id="google-search-console"><a href="#google-search-console" class="header-anchor">#</a> Google Search Console</h3> <p>同样，到<a href="https://search.google.com/search-console/about" target="_blank" rel="noopener noreferrer">Google Search Console<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中添加网址
</p><div align="center"><img src="https://i.loli.net/2021/08/08/uI5Ta9yNxg7iPBH.png" alt=""></div><p></p> <p>我一般选择右边的。</p> <p>同样，有几种方式验证所属权
</p><div align="center"><img src="https://i.loli.net/2021/08/08/G6T3NMHgelmoF4a.png" alt=""></div><p></p> <p>之后同样提交站点地图就行。</p> <p>可以选择请求编入索引
</p><div align="center"><img src="https://i.loli.net/2021/08/08/6SGp7harcekRPo9.png" alt=""></div><p></p> <p>网站收录后会变成这样
</p><div align="center"><img src="https://i.loli.net/2021/08/08/duPNOK9HMfm83Tj.png" alt=""></div><p></p> <p>OK，现在所有的都已经讲完了，可能有很多细节没有涉及到，也可能有很多错误和不完善的地方，我也正在尝试着去解决。😇</p> <p>顺带一提，百度收录得是真的慢诶🙃</p> <p><br><br> <div><span id="/deployment/" class="leancloud_visitors"><span class="stat read-count"><img src="/read-count.png" class="icon"> <span class="leancloud-visitors-count"></span></span></span> <div id="vcomments"></div></div></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">22 days ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a10b2338.js" defer></script><script src="/assets/js/2.c67e4eb4.js" defer></script><script src="/assets/js/19.515fff59.js" defer></script><script src="/assets/js/5.a0895fed.js" defer></script><script src="/assets/js/4.07c81549.js" defer></script>
  </body>
</html>
